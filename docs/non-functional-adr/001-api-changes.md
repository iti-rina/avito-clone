# ADR 1: Доработка API для удобства работы с данными

## Контекст

API, предоставленное в задании, требовало доработки, так как оно не позволяло гибко и удобно работать с данными. Например, API не поддерживало кросс-доменные запросы, не обеспечивало серверную пагинацию и не позволяло выполнять поиск и фильтрацию данных удобным способом.

## Решение

Я внесла ряд изменений в API, чтобы сделать его более удобным и функциональным:

- Добавила поддержку CORS, чтобы API можно было работать
- Реализовала серверную пагинацию через обработку `page` и `limit`, и добавление в ответ заголовков: `'X-Total-Count', 'X-Total-Pages', 'X-Current-Page'`
- Добавила поддержку query-параметров для пагинации, поиска по названию и фильтрации по категориям, что позволяет гибко запрашивать нужные данные.
- Сделала проверку на type в запросе `PUT /item/:id`, чтобы при изменении категории объявления объект очищался и не сохранял неактуальные данные
- Добавила возможность загружать изображения в формате `base64`

## Причины выбора

- **Поддержка CORS** обеспечивает доступ к API из браузерных клиентских приложений
- **Серверная пагинация**
  - Экономия ресурсов – не загружаем всю базу на клиент
  - Быстрее рендеринг – клиент получает только нужные данные
  - Меньше трафика – сервер отдаёт маленькие чанки, а не весь массив данных
- **Гибкость запросов** (пагинация, поиск, фильтрация) делает API удобным для работы с данными
- **Безопасность и целостность данных** при редактировании объявлений благодаря проверке категории объявления

## Последствия

- С API стало более удобно работать на стороне фронтенда
- Производительность системы улучшена за счет серверной пагинации и фильтрации данных на стороне сервера
- Реализация CORS делает API доступным для браузерных приложений, без этого работать с сервером не получилось бы.
